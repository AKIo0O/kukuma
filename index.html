<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <script src="js/database.js"></script>
    <script src="js/localstorage.js"></script>
    <script src="js/citys.js"></script>
  </head>
  <body manifest="app.appcache">
  <header class="index">
    <div id="nav">
      <a href="#" id="refresh">refresh</a>
    </div>
  </header>
    <script type="text/javascript">
      window.addEventListener("DOMContentLoaded",function(){
        document.getElementById("refresh").addEventListener("click",function(){
          location.reload(true);
        });

        console.time("WebSQL");

        var ptable = new Table("province",["id","name"]),
            ctable = new Table("city",["id","name","provinceid"]);
        province.forEach(function(p){
          ptable.save(p);
        });

        for(var c in city){

          city[c].forEach(function(item){
            item.provinceid = c;
            ctable.save(item);
          });

        }

        console.timeEnd("WebSQL");

        console.time("LocalStorage");

        var p = new Store("province");
        p.add(province);
        p.save();
        var c = new Store("city");
        c.add(city);
        c.save();

        console.log(JSON.stringify(p.get("province")));
        console.timeEnd("LocalStorage");
      });
    </script>
  </body>
</html>